{"version":3,"file":"use-image-ynoNqIgM.js","sources":["../../node_modules/@chakra-ui/react/dist/esm/image/use-image.mjs"],"sourcesContent":["'use client';\nimport { useSafeLayoutEffect } from '@chakra-ui/hooks';\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\nfunction useImage(props) {\n  const {\n    loading,\n    src,\n    srcSet,\n    onLoad,\n    onError,\n    crossOrigin,\n    sizes,\n    ignoreFallback\n  } = props;\n  const [status, setStatus] = useState(\"pending\");\n  useEffect(() => {\n    setStatus(src ? \"loading\" : \"pending\");\n  }, [src]);\n  const imageRef = useRef(null);\n  const load = useCallback(() => {\n    if (!src)\n      return;\n    flush();\n    const img = new Image();\n    img.src = src;\n    if (crossOrigin)\n      img.crossOrigin = crossOrigin;\n    if (srcSet)\n      img.srcset = srcSet;\n    if (sizes)\n      img.sizes = sizes;\n    if (loading)\n      img.loading = loading;\n    img.onload = (event) => {\n      flush();\n      setStatus(\"loaded\");\n      onLoad?.(event);\n    };\n    img.onerror = (error) => {\n      flush();\n      setStatus(\"failed\");\n      onError?.(error);\n    };\n    imageRef.current = img;\n  }, [src, crossOrigin, srcSet, sizes, onLoad, onError, loading]);\n  const flush = () => {\n    if (imageRef.current) {\n      imageRef.current.onload = null;\n      imageRef.current.onerror = null;\n      imageRef.current = null;\n    }\n  };\n  useSafeLayoutEffect(() => {\n    if (ignoreFallback)\n      return void 0;\n    if (status === \"loading\") {\n      load();\n    }\n    return () => {\n      flush();\n    };\n  }, [status, load, ignoreFallback]);\n  return ignoreFallback ? \"loaded\" : status;\n}\nconst shouldShowFallbackImage = (status, fallbackStrategy) => status !== \"loaded\" && fallbackStrategy === \"beforeLoadOrError\" || status === \"failed\" && fallbackStrategy === \"onError\";\n\nexport { shouldShowFallbackImage, useImage };\n"],"names":["useImage","props","loading","src","srcSet","onLoad","onError","crossOrigin","sizes","ignoreFallback","status","setStatus","useState","useEffect","imageRef","useRef","load","useCallback","flush","img","event","error","useSafeLayoutEffect","shouldShowFallbackImage","fallbackStrategy"],"mappings":"+CAIA,SAASA,EAASC,EAAO,CACvB,KAAM,CACJ,QAAAC,EACA,IAAAC,EACA,OAAAC,EACA,OAAAC,EACA,QAAAC,EACA,YAAAC,EACA,MAAAC,EACA,eAAAC,CACJ,EAAMR,EACE,CAACS,EAAQC,CAAS,EAAIC,EAAAA,SAAS,SAAS,EAC9CC,EAAAA,UAAU,IAAM,CACdF,EAAUR,EAAM,UAAY,SAAS,CACvC,EAAG,CAACA,CAAG,CAAC,EACR,MAAMW,EAAWC,EAAAA,OAAO,IAAI,EACtBC,EAAOC,EAAAA,YAAY,IAAM,CAC7B,GAAI,CAACd,EACH,OACFe,EAAK,EACL,MAAMC,EAAM,IAAI,MAChBA,EAAI,IAAMhB,EACNI,IACFY,EAAI,YAAcZ,GAChBH,IACFe,EAAI,OAASf,GACXI,IACFW,EAAI,MAAQX,GACVN,IACFiB,EAAI,QAAUjB,GAChBiB,EAAI,OAAUC,GAAU,CACtBF,EAAK,EACLP,EAAU,QAAQ,EAClBN,IAASe,CAAK,CAChB,EACAD,EAAI,QAAWE,GAAU,CACvBH,EAAK,EACLP,EAAU,QAAQ,EAClBL,IAAUe,CAAK,CACjB,EACAP,EAAS,QAAUK,CACrB,EAAG,CAAChB,EAAKI,EAAaH,EAAQI,EAAOH,EAAQC,EAASJ,CAAO,CAAC,EACxDgB,EAAQ,IAAM,CACdJ,EAAS,UACXA,EAAS,QAAQ,OAAS,KAC1BA,EAAS,QAAQ,QAAU,KAC3BA,EAAS,QAAU,KAEvB,EACA,OAAAQ,EAAoB,IAAM,CACxB,GAAI,CAAAb,EAEJ,OAAIC,IAAW,WACbM,EAAI,EAEC,IAAM,CACXE,EAAK,CACP,CACF,EAAG,CAACR,EAAQM,EAAMP,CAAc,CAAC,EAC1BA,EAAiB,SAAWC,CACrC,CACK,MAACa,EAA0B,CAACb,EAAQc,IAAqBd,IAAW,UAAYc,IAAqB,qBAAuBd,IAAW,UAAYc,IAAqB","x_google_ignoreList":[0]}