import{a as T,r as i,f as D,b as Ve,o as Be,c as Y,d as tt,j as e,e as G,g as me,I as Le,h as nt,i as st,u as rt,A as ot,k as at,B as Fe,l as it,n as ut,L as Re}from"./index-BpjOl2gf.js";import{u as ct}from"./cartStore-CijWDpS4.js";import{u as lt}from"./use-toast-b9gKOQnk.js";import{g as dt,C as pt,V as z,H as _e,T as I,a as R}from"./text-DBB0BKR3.js";import{I as mt}from"./image-Me3l96kT.js";import{B as ft}from"./badge-ruTnR55P.js";import{a as ce,m as le,B as q}from"./button-CbE11h9m.js";import{c as E,u as ht,F as xt,a as bt,I as gt}from"./input-C2yDW08u.js";import{D as de}from"./divider-CMDYxCoo.js";import"./use-image-ynoNqIgM.js";function yt(s){const t=parseFloat(s);return typeof t!="number"||Number.isNaN(t)?0:t}function ze(s,t){let o=yt(s);const r=10**(t??10);return o=Math.round(o*r)/r,t?o.toFixed(t):o.toString()}function Te(s){if(!Number.isFinite(s))return 0;let t=1,o=0;for(;Math.round(s*t)/t!==s;)t*=10,o+=1;return o}function vt(s,t,o){return s==null?s:(o<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(s,t),o))}function It(s,t,o,r){const u=T(o);return i.useEffect(()=>{const a=typeof s=="function"?s():s??document;if(!(!o||!a))return a.addEventListener(t,u,r),()=>{a.removeEventListener(t,u,r)}},[t,s,r,u,o]),()=>{(typeof s=="function"?s():s??document)?.removeEventListener(t,u,r)}}function Nt(s={}){const{onChange:t,precision:o,defaultValue:r,value:u,step:a=1,min:l=Number.MIN_SAFE_INTEGER,max:h=Number.MAX_SAFE_INTEGER,keepWithinRange:p=!0}=s,y=T(t),[g,C]=i.useState(()=>r==null?"":pe(r,a,o)??""),m=typeof u<"u",b=m?u:g,A=Ge(_(b),a),k=o??A,j=i.useCallback(c=>{c!==b&&(m||C(c.toString()),y?.(c.toString(),_(c)))},[y,m,b]),S=i.useCallback(c=>{let f=c;return p&&(f=vt(f,l,h)),ze(f,k)},[k,p,h,l]),M=i.useCallback((c=a)=>{let f;b===""?f=_(c):f=_(b)+c,f=S(f),j(f)},[S,a,j,b]),O=i.useCallback((c=a)=>{let f;b===""?f=_(-c):f=_(b)-c,f=S(f),j(f)},[S,a,j,b]),V=i.useCallback(()=>{let c;r==null?c="":c=pe(r,a,o)??l,j(c)},[r,o,a,j,l]),K=i.useCallback(c=>{const f=pe(c,a,k)??l;j(f)},[k,a,j,l]),w=_(b);return{isOutOfRange:w>h||w<l,isAtMax:w===h,isAtMin:w===l,precision:k,value:b,valueAsNumber:w,update:j,reset:V,increment:M,decrement:O,clamp:S,cast:K,setValue:C}}function _(s){return parseFloat(s.toString().replace(/[^\w.-]+/g,""))}function Ge(s,t){return Math.max(Te(t),Te(s))}function pe(s,t,o){const r=_(s);if(Number.isNaN(r))return;const u=Ge(r,t);return ze(r,o??u)}function Ct(s,t){const o=T(s);i.useEffect(()=>{let r=null;const u=()=>o();return t!==null&&(r=window.setInterval(u,t)),()=>{r&&window.clearInterval(r)}},[t,o])}const[jt,St]=me({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),Ke=D(function(t,o){const r=Ve("Input",t),{children:u,className:a,...l}=Be(t),h=Y("chakra-input__group",a),p={},y=dt(u),g=r.field;y.forEach(m=>{r&&(g&&m.type.id==="InputLeftElement"&&(p.paddingStart=g.height??g.h),g&&m.type.id==="InputRightElement"&&(p.paddingEnd=g.height??g.h),m.type.id==="InputRightAddon"&&(p.borderEndRadius=0),m.type.id==="InputLeftAddon"&&(p.borderStartRadius=0))});const C=y.map(m=>{const b=tt({size:m.props?.size||t.size,variant:m.props?.variant||t.variant});return m.type.id!=="Input"?i.cloneElement(m,b):i.cloneElement(m,Object.assign(b,p,m.props))});return e.jsx(G.div,{className:h,ref:o,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...r.group},"data-group":!0,...l,children:e.jsx(jt,{value:r,children:C})})});Ke.displayName="InputGroup";const Et=G("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),oe=D(function(t,o){const{placement:r="left",...u}=t,a=St(),l=a.field,p={[r==="left"?"insetStart":"insetEnd"]:"0",width:l?.height??l?.h,height:l?.height??l?.h,fontSize:l?.fontSize,...a.element};return e.jsx(Et,{ref:o,__css:p,...u})});oe.id="InputElement";oe.displayName="InputElement";const Ue=D(function(t,o){const{className:r,...u}=t,a=Y("chakra-input__left-element",r);return e.jsx(oe,{ref:o,placement:"left",className:a,...u})});Ue.id="InputLeftElement";Ue.displayName="InputLeftElement";const fe=D(function(t,o){const{className:r,...u}=t,a=Y("chakra-input__right-element",r);return e.jsx(oe,{ref:o,placement:"right",className:a,...u})});fe.id="InputRightElement";fe.displayName="InputRightElement";const At=s=>e.jsx(Le,{viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),kt=s=>e.jsx(Le,{viewBox:"0 0 24 24",...s,children:e.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function Me(s,t,o,r){i.useEffect(()=>{if(!s.current||!r)return;const u=s.current.ownerDocument.defaultView??window,a=Array.isArray(t)?t:[t],l=new u.MutationObserver(h=>{for(const p of h)p.type==="attributes"&&p.attributeName&&a.includes(p.attributeName)&&o(p)});return l.observe(s.current,{attributes:!0,attributeFilter:a}),()=>l.disconnect()})}const wt=50,Oe=300;function Pt(s,t){const[o,r]=i.useState(!1),[u,a]=i.useState(null),[l,h]=i.useState(!0),p=i.useRef(null),y=()=>clearTimeout(p.current);Ct(()=>{u==="increment"&&s(),u==="decrement"&&t()},o?wt:null);const g=i.useCallback(()=>{l&&s(),p.current=setTimeout(()=>{h(!1),r(!0),a("increment")},Oe)},[s,l]),C=i.useCallback(()=>{l&&t(),p.current=setTimeout(()=>{h(!1),r(!0),a("decrement")},Oe)},[t,l]),m=i.useCallback(()=>{h(!0),r(!1),y()},[]);return i.useEffect(()=>()=>y(),[]),{up:g,down:C,stop:m,isSpinning:o}}const Dt=/^[Ee0-9+\-.]$/;function Ft(s){return Dt.test(s)}function Rt(s,t){if(s.key==null)return!0;const o=s.ctrlKey||s.altKey||s.metaKey;return!(s.key.length===1)||o?!0:t(s.key)}function _t(s={}){const{focusInputOnChange:t=!0,clampValueOnBlur:o=!0,keepWithinRange:r=!0,min:u=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER,step:l=1,isReadOnly:h,isDisabled:p,isRequired:y,isInvalid:g,pattern:C="[0-9]*(.[0-9]+)?",inputMode:m="decimal",allowMouseWheel:b,id:A,onChange:k,precision:j,name:S,"aria-describedby":M,"aria-label":O,"aria-labelledby":V,onFocus:K,onBlur:w,onInvalid:B,getAriaValueText:X,isValidCharacter:U,format:c,parse:f,...W}=s,xe=T(K),be=T(w),ie=T(B),Q=T(U??Ft),ge=T(X),d=Nt(s),{update:$,increment:ye,decrement:ve}=d,[Qe,ue]=i.useState(!1),J=!(h||p),F=i.useRef(null),Z=i.useRef(null),Ie=i.useRef(null),Ne=i.useRef(null),ee=i.useCallback(n=>n.split("").filter(Q).join(""),[Q]),te=i.useCallback(n=>f?.(n)??n,[f]),L=i.useCallback(n=>(c?.(n)??n).toString(),[c]);nt(()=>{(d.valueAsNumber>a||d.valueAsNumber<u)&&ie?.("rangeOverflow",L(d.value),d.valueAsNumber)},[d.valueAsNumber,d.value,L,ie]),st(()=>{if(!F.current)return;if(F.current.value!=d.value){const x=te(F.current.value);d.setValue(ee(x))}},[te,ee]);const ne=i.useCallback((n=l)=>{J&&ye(n)},[ye,J,l]),se=i.useCallback((n=l)=>{J&&ve(n)},[ve,J,l]),v=Pt(ne,se);Me(Ie,"disabled",v.stop,v.isSpinning),Me(Ne,"disabled",v.stop,v.isSpinning);const Ce=i.useCallback(n=>{if(n.nativeEvent.isComposing)return;const N=te(n.currentTarget.value);$(ee(N)),Z.current={start:n.currentTarget.selectionStart,end:n.currentTarget.selectionEnd}},[$,ee,te]),je=i.useCallback(n=>{xe?.(n),Z.current&&(n.currentTarget.selectionStart=Z.current.start??n.currentTarget.value?.length,n.currentTarget.selectionEnd=Z.current.end??n.currentTarget.selectionStart)},[xe]),Se=i.useCallback(n=>{if(n.nativeEvent.isComposing)return;Rt(n,Q)||n.preventDefault();const x=Ee(n)*l,N=n.key,H={ArrowUp:()=>ne(x),ArrowDown:()=>se(x),Home:()=>$(u),End:()=>$(a)}[N];H&&(n.preventDefault(),H(n))},[Q,l,ne,se,$,u,a]),Ee=n=>{let x=1;return(n.metaKey||n.ctrlKey)&&(x=.1),n.shiftKey&&(x=10),x},Ae=i.useMemo(()=>{const n=ge?.(d.value);if(n!=null)return n;const x=d.value.toString();return x||void 0},[d.value,ge]),ke=i.useCallback(()=>{let n=d.value;if(d.value==="")return;/^[eE]/.test(d.value.toString())?d.setValue(""):(d.valueAsNumber<u&&(n=u),d.valueAsNumber>a&&(n=a),d.cast(n))},[d,a,u]),we=i.useCallback(()=>{ue(!1),o&&ke()},[o,ue,ke]),re=i.useCallback(()=>{t&&requestAnimationFrame(()=>{F.current?.focus()})},[t]),Pe=i.useCallback(n=>{n.preventDefault(),v.up(),re()},[re,v]),De=i.useCallback(n=>{n.preventDefault(),v.down(),re()},[re,v]);It(()=>F.current,"wheel",n=>{const N=(F.current?.ownerDocument??document).activeElement===F.current;if(!b||!N)return;n.preventDefault();const P=Ee(n)*l,H=Math.sign(n.deltaY);H===-1?ne(P):H===1&&se(P)},{passive:!1});const Je=i.useCallback((n={},x=null)=>{const N=p||r&&d.isAtMax;return{...n,ref:le(x,Ie),role:"button",tabIndex:-1,onPointerDown:E(n.onPointerDown,P=>{P.button!==0||N||Pe(P)}),onPointerLeave:E(n.onPointerLeave,v.stop),onPointerUp:E(n.onPointerUp,v.stop),disabled:N,"aria-disabled":ce(N)}},[d.isAtMax,r,Pe,v.stop,p]),Ze=i.useCallback((n={},x=null)=>{const N=p||r&&d.isAtMin;return{...n,ref:le(x,Ne),role:"button",tabIndex:-1,onPointerDown:E(n.onPointerDown,P=>{P.button!==0||N||De(P)}),onPointerLeave:E(n.onPointerLeave,v.stop),onPointerUp:E(n.onPointerUp,v.stop),disabled:N,"aria-disabled":ce(N)}},[d.isAtMin,r,De,v.stop,p]),et=i.useCallback((n={},x=null)=>({name:S,inputMode:m,type:"text",pattern:C,"aria-labelledby":V,"aria-label":O,"aria-describedby":M,id:A,disabled:p,role:"spinbutton",...n,readOnly:n.readOnly??h,"aria-readonly":n.readOnly??h,"aria-required":n.required??y,required:n.required??y,ref:le(F,x),value:L(d.value),"aria-valuemin":u,"aria-valuemax":a,"aria-valuenow":Number.isNaN(d.valueAsNumber)?void 0:d.valueAsNumber,"aria-invalid":ce(g??d.isOutOfRange),"aria-valuetext":Ae,autoComplete:"off",autoCorrect:"off",onChange:E(n.onChange,Ce),onKeyDown:E(n.onKeyDown,Se),onFocus:E(n.onFocus,je,()=>ue(!0)),onBlur:E(n.onBlur,be,we)}),[S,m,C,V,O,L,M,A,p,y,h,g,d.value,d.valueAsNumber,d.isOutOfRange,u,a,Ae,Ce,Se,je,be,we]);return{value:L(d.value),valueAsNumber:d.valueAsNumber,isFocused:Qe,isDisabled:p,isReadOnly:h,getIncrementButtonProps:Je,getDecrementButtonProps:Ze,getInputProps:et,htmlProps:W}}const[Tt,ae]=me({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[Mt,he]=me({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),We=D(function(t,o){const r=Ve("NumberInput",t),u=Be(t),a=ht(u),{htmlProps:l,...h}=_t(a),p=i.useMemo(()=>h,[h]);return e.jsx(Mt,{value:p,children:e.jsx(Tt,{value:r,children:e.jsx(G.div,{...l,ref:o,className:Y("chakra-numberinput",t.className),__css:{position:"relative",zIndex:0,...r.root}})})})});We.displayName="NumberInput";const $e=D(function(t,o){const r=ae();return e.jsx(G.div,{"aria-hidden":!0,ref:o,...t,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...r.stepperGroup}})});$e.displayName="NumberInputStepper";const He=D(function(t,o){const{getInputProps:r}=he(),u=r(t,o),a=ae();return e.jsx(G.input,{...u,className:Y("chakra-numberinput__field",t.className),__css:{width:"100%",...a.field}})});He.displayName="NumberInputField";const qe=G("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),Ye=D(function(t,o){const r=ae(),{getDecrementButtonProps:u}=he(),a=u(t,o);return e.jsx(qe,{...a,__css:r.stepper,children:t.children??e.jsx(At,{})})});Ye.displayName="NumberDecrementStepper";const Xe=D(function(t,o){const{getIncrementButtonProps:r}=he(),u=r(t,o),a=ae();return e.jsx(qe,{...u,__css:a.stepper,children:t.children??e.jsx(kt,{})})});Xe.displayName="NumberIncrementStepper";const Ht=()=>{const{items:s,removeItem:t,updateQuantity:o,clearCart:r,getSubtotal:u,getTax:a,getDiscount:l,getTotal:h,getItemCount:p,applyDiscount:y,removeDiscount:g,discountCode:C}=ct(),m=lt(),b=rt(),[A,k]=i.useState(""),j=(c,f,W)=>{o(c,f,W)},S=(c,f)=>{t(c,f),m({title:"Item removed",description:"Item has been removed from your cart.",status:"success",duration:3e3,isClosable:!0})},M=()=>{A.trim()&&(y(A.trim()),l()>0?m({title:"Discount applied!",description:`Discount code ${A.toUpperCase()} applied successfully.`,status:"success",duration:3e3,isClosable:!0}):m({title:"Invalid discount code",description:"Please check your discount code and try again.",status:"error",duration:3e3,isClosable:!0}),k(""))},O=()=>{g(),m({title:"Discount removed",description:"Discount code has been removed.",status:"info",duration:3e3,isClosable:!0})},V=()=>{b("/checkout")},K=u(),w=a(),B=l(),X=h(),U=p();return e.jsx(pt,{maxW:"container.lg",py:8,children:e.jsxs(z,{spacing:6,align:"stretch",children:[e.jsx(_e,{as:"h1",size:"xl",textAlign:"center",children:"Your Cart"}),s.length===0?e.jsxs(ot,{status:"info",children:[e.jsx(at,{}),e.jsxs(Fe,{children:[e.jsx(it,{children:"Your cart is empty!"}),e.jsxs(ut,{children:["Add some laundry services to get started."," ",e.jsx(Re,{to:"/services",style:{color:"blue",textDecoration:"underline"},children:"Browse Services"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(I,{fontSize:"lg",textAlign:"center",children:[U," item",U!==1?"s":""," in your cart"]}),e.jsx(z,{spacing:4,align:"stretch",children:s.map(c=>e.jsxs(Fe,{borderWidth:1,borderRadius:"lg",p:4,shadow:"md",children:[e.jsxs(R,{spacing:4,align:"start",children:[e.jsx(mt,{src:c.image,alt:c.name,boxSize:"80px",objectFit:"cover",borderRadius:"md"}),e.jsxs(z,{align:"start",flex:1,spacing:2,children:[e.jsx(_e,{as:"h3",size:"md",children:c.name}),e.jsx(I,{color:"gray.600",children:c.category}),e.jsx(ft,{colorScheme:"blue",children:c.service}),e.jsxs(I,{fontWeight:"bold",children:["$",c.price.toFixed(2)," each"]})]}),e.jsxs(z,{spacing:2,children:[e.jsxs(We,{size:"sm",maxW:20,value:c.quantity,min:1,onChange:(f,W)=>j(c.id,c.service,W),children:[e.jsx(He,{}),e.jsxs($e,{children:[e.jsx(Xe,{}),e.jsx(Ye,{})]})]}),e.jsx(q,{size:"sm",colorScheme:"red",variant:"outline",onClick:()=>S(c.id,c.service),children:"Remove"})]})]}),e.jsxs(I,{fontWeight:"bold",mt:2,children:["Subtotal: $",(c.price*c.quantity).toFixed(2)]})]},`${c.id}-${c.service}`))}),e.jsx(de,{}),e.jsxs(z,{spacing:4,align:"stretch",children:[e.jsxs(xt,{children:[e.jsx(bt,{children:"Discount Code"}),e.jsxs(Ke,{size:"md",children:[e.jsx(gt,{pr:"4.5rem",placeholder:"Enter discount code",value:A,onChange:c=>k(c.target.value)}),e.jsx(fe,{width:"4.5rem",children:e.jsx(q,{h:"1.75rem",size:"sm",onClick:M,children:"Apply"})})]})]}),C&&e.jsxs(R,{justify:"space-between",children:[e.jsxs(I,{children:["Discount (",C,"):"]}),e.jsxs(R,{children:[e.jsxs(I,{color:"green.600",children:["-$",B.toFixed(2)]}),e.jsx(q,{size:"xs",colorScheme:"red",variant:"outline",onClick:O,children:"Remove"})]})]})]}),e.jsx(de,{}),e.jsxs(z,{spacing:2,align:"stretch",children:[e.jsxs(R,{justify:"space-between",children:[e.jsx(I,{children:"Subtotal:"}),e.jsxs(I,{children:["$",K.toFixed(2)]})]}),B>0&&e.jsxs(R,{justify:"space-between",children:[e.jsx(I,{children:"Discount:"}),e.jsxs(I,{color:"green.600",children:["-$",B.toFixed(2)]})]}),e.jsxs(R,{justify:"space-between",children:[e.jsx(I,{children:"Tax (8%):"}),e.jsxs(I,{children:["$",w.toFixed(2)]})]}),e.jsx(de,{}),e.jsxs(R,{justify:"space-between",children:[e.jsx(I,{fontSize:"xl",fontWeight:"bold",children:"Total:"}),e.jsxs(I,{fontSize:"xl",fontWeight:"bold",children:["$",X.toFixed(2)]})]})]}),e.jsxs(R,{spacing:4,justify:"center",children:[e.jsx(q,{as:Re,to:"/services",variant:"outline",children:"Continue Shopping"}),e.jsx(q,{colorScheme:"blue",size:"lg",onClick:V,children:"Proceed to Checkout"})]})]})]})})};export{Ht as default};
//# sourceMappingURL=Cart-38xgTC1I.js.map
