import{g as J,j as e,e as w,r as C,f as M,b as K,o as X,t as $,c as D,v as q,w as R,x as T,y as v,s as ee,u as se,B as L,m as ae}from"./index-BpjOl2gf.js";import{m as te,n as re,h as ne,o as ie}from"./index-lSaSgMnw.js";import{u as oe}from"./use-toast-b9gKOQnk.js";import{b as le,c as ce,C as F,V as g,H as _,T as y,a as O}from"./text-DBB0BKR3.js";import{d as de,B as b}from"./button-CbE11h9m.js";import{C as he,a as me}from"./card-body-C5gj7D-k.js";import{u as ue}from"./use-image-ynoNqIgM.js";import{c as xe,F as B,a as P,I as z}from"./input-C2yDW08u.js";import{B as fe}from"./badge-ruTnR55P.js";import{D as pe}from"./divider-CMDYxCoo.js";import{G as ge}from"./grid-Dqih6cow.js";const[je,ye]=J({name:"AvatarStylesContext",hookName:"useAvatarStyles",providerName:"<Avatar/>"});function be(s){const a=s.trim().split(" "),r=a[0]??"",t=a.length>1?a[a.length-1]:"";return r&&t?`${r.charAt(0)}${t.charAt(0)}`:r.charAt(0)}function V(s){const{name:a,getInitials:r,...t}=s,n=ye();return e.jsx(w.div,{role:"img","aria-label":a,...t,__css:n.label,children:a?r?.(a):null})}V.displayName="AvatarName";const H=s=>e.jsxs(w.svg,{viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg",...s,children:[e.jsx("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),e.jsx("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"})]});function G(s){const{src:a,srcSet:r,onError:t,onLoad:n,getInitials:l,name:c,borderRadius:i,loading:h,iconLabel:d,icon:m=e.jsx(H,{}),ignoreFallback:u,referrerPolicy:o,crossOrigin:f}=s,j=ue({src:a,onError:t,crossOrigin:f,ignoreFallback:u})==="loaded";return!a||!j?c?e.jsx(V,{className:"chakra-avatar__initials",getInitials:l,name:c}):C.cloneElement(m,{role:"img","aria-label":d}):e.jsx(w.img,{src:a,srcSet:r,alt:c??d,onLoad:n,referrerPolicy:o,crossOrigin:f??void 0,className:"chakra-avatar__img",loading:h,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:i}})}G.displayName="AvatarImage";const ve=$({display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0}),Q=M((s,a)=>{const r=K("Avatar",s),[t,n]=C.useState(!1),{src:l,srcSet:c,name:i,showBorder:h,borderRadius:d="full",onError:m,onLoad:u,getInitials:o=be,icon:f=e.jsx(H,{}),iconLabel:x=" avatar",loading:j,children:p,borderColor:S,ignoreFallback:N,crossOrigin:k,referrerPolicy:A,...I}=X(s),E={borderRadius:d,borderWidth:h?"2px":void 0,...ve,...r.container};return S&&(E.borderColor=S),e.jsx(w.span,{ref:a,...I,className:D("chakra-avatar",s.className),"data-loaded":de(t),__css:E,children:e.jsxs(je,{value:r,children:[e.jsx(G,{src:l,srcSet:c,loading:j,onLoad:xe(u,()=>{n(!0)}),onError:m,getInitials:o,name:i,borderRadius:d,icon:f,iconLabel:x,ignoreFallback:N,crossOrigin:k,referrerPolicy:A}),p]})})});Q.displayName="Avatar";const U=M(function(a,r){const{direction:t,align:n,justify:l,wrap:c,basis:i,grow:h,shrink:d,...m}=a,u={display:"flex",flexDirection:t,alignItems:n,justifyContent:l,flexWrap:c,flexBasis:i,flexGrow:h,flexShrink:d};return e.jsx(w.div,{ref:r,__css:u,...m})});U.displayName="Flex";function ke(s,a={}){const{ssr:r=!0,fallback:t}=a,{getWindow:n}=q(),l=Array.isArray(s)?s:[s];let c=Array.isArray(t)?t:[t];c=c.filter(d=>d!=null);const[i,h]=C.useState(()=>l.map((d,m)=>({media:d,matches:r?!!c[m]:n().matchMedia(d).matches})));return C.useEffect(()=>{const d=n();h(l.map(o=>({media:o,matches:d.matchMedia(o).matches})));const m=l.map(o=>d.matchMedia(o)),u=o=>{h(f=>f.slice().map(x=>x.media===o.media?{...x,matches:o.matches}:x))};return m.forEach(o=>{typeof o.addListener=="function"?o.addListener(u):o.addEventListener("change",u)}),()=>{m.forEach(o=>{typeof o.removeListener=="function"?o.removeListener(u):o.removeEventListener("change",u)})}},[n]),i.map(d=>d.matches)}function Ce(s){const a=T(s)?s:{fallback:s??"base"},t=R().__breakpoints.details.map(({minMaxQuery:i,breakpoint:h})=>({breakpoint:h,query:i.replace("@media screen and ","")})),n=t.map(i=>i.breakpoint===a.fallback),c=ke(t.map(i=>i.query),{fallback:n,ssr:a.ssr}).findIndex(i=>i==!0);return t[c]?.breakpoint??a.fallback}function Se(s,a,r=le){let t=Object.keys(s).indexOf(a);if(t!==-1)return s[a];let n=r.indexOf(a);for(;n>=0;){const l=r[n];if(s.hasOwnProperty(l)){t=n;break}n-=1}if(t!==-1){const l=r[t];return s[l]}}function we(s,a){const r=T(a)?a:{fallback:"base"},t=Ce(r),n=R();if(!t)return;const l=Array.from(n.__breakpoints?.keys||[]),c=Array.isArray(s)?Object.fromEntries(Object.entries(ce(s,l)).map(([i,h])=>[i,h])):s;return Se(c,t,l)}function Ae(s){return Array(s).fill(1).map((a,r)=>r+1)}const W=3,Y=s=>{const{noOfLines:a=W,spacing:r="0.5rem",skeletonHeight:t="0.5rem",className:n,startColor:l,endColor:c,isLoaded:i,fadeDuration:h,speed:d,variant:m,size:u,colorScheme:o,children:f,...x}=s,j=we(typeof a=="number"?[a]:a)||W,p=Ae(j),S=k=>j>1&&k===p.length?"80%":"100%",N=D("chakra-skeleton__group",n);return e.jsx(w.div,{className:N,...x,children:p.map((k,A)=>{if(i&&A>0)return null;const I=i?null:{mb:k===p.length?"0":r,width:S(k),height:t};return e.jsx(v,{startColor:l,endColor:c,isLoaded:i,fadeDuration:h,speed:d,variant:m,size:u,colorScheme:o,...I,children:A===0?f:void 0},p.length.toString()+k)})})};Y.displayName="SkeletonText";const Z=({size:s="2rem",...a})=>e.jsx(v,{borderRadius:"full",boxSize:s,...a});Z.displayName="SkeletonCircle";function Me(){const{user:s,logout:a,loading:r}=ee(),t=se(),n=oe(),[l,c]=C.useState(!1),[i,h]=C.useState({displayName:s?.displayName||"",email:s?.email||""}),[d,m]=C.useState(!1),u=x=>{const{name:j,value:p}=x.target;h(S=>({...S,[j]:p}))},o=async()=>{m(!0);try{console.log("Saving profile:",i),n({title:"Profile updated!",description:"Your profile has been saved successfully.",status:"success",duration:3e3,isClosable:!0}),c(!1)}catch(x){console.error("Failed to save profile:",x),n({title:"Error",description:"Failed to update profile. Please try again.",status:"error",duration:3e3,isClosable:!0})}finally{m(!1)}},f=async()=>{try{await a(),t("/login")}catch(x){console.error("Logout failed:",x)}};return r?e.jsx(L,{minH:"screen",bg:"gradient-to-br",py:8,display:"flex",alignItems:"center",justifyContent:"center",px:2,children:e.jsxs(L,{w:"full",maxW:"2xl",backdropFilter:"blur(10px)",bg:"white/70",borderWidth:1,borderColor:"border",borderRadius:"3xl",shadow:"2xl",p:{base:8,md:12},children:[e.jsxs(U,{alignItems:"center",gap:6,mb:8,children:[e.jsx(Z,{size:"24"}),e.jsxs("div",{children:[e.jsx(v,{height:"36px",width:"200px",mb:1}),e.jsx(v,{height:"20px",width:"150px"}),e.jsx(v,{height:"20px",width:"80px",mt:2})]})]}),e.jsxs(L,{bg:"white/80",borderRadius:"2xl",shadow:"md",p:6,mb:8,children:[e.jsx(v,{height:"24px",width:"150px",mb:6}),e.jsx(Y,{mt:"4",noOfLines:4,spacing:"4"})]}),e.jsxs(L,{bg:"white/80",borderRadius:"2xl",shadow:"md",p:6,children:[e.jsx(v,{height:"24px",width:"150px",mb:6}),e.jsx(v,{height:"40px",width:"full"})]})]})}):s?e.jsx(F,{maxW:"container.md",py:12,children:e.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(g,{spacing:8,align:"stretch",children:[e.jsx(he,{shadow:"lg",children:e.jsx(me,{children:e.jsxs(g,{spacing:6,children:[e.jsxs(O,{spacing:6,children:[e.jsx(Q,{size:"2xl",src:s.photoURL||void 0,name:s.displayName||s.name}),e.jsxs(g,{align:"start",spacing:2,children:[e.jsx(_,{size:"lg",children:s.displayName||s.name||"User"}),e.jsx(y,{color:"gray.600",children:s.email}),e.jsx(fe,{colorScheme:"blue",children:s.role||"Customer"})]})]}),e.jsx(pe,{}),l?e.jsxs(g,{spacing:4,w:"full",children:[e.jsxs(B,{children:[e.jsx(P,{children:"Display Name"}),e.jsx(z,{name:"displayName",value:i.displayName,onChange:u,placeholder:"Enter your name","aria-label":"Display Name"})]}),e.jsxs(B,{children:[e.jsx(P,{children:"Email"}),e.jsx(z,{name:"email",value:i.email,isReadOnly:!0,"aria-label":"Email (read-only)"})]}),e.jsxs(O,{spacing:4,w:"full",children:[e.jsx(b,{colorScheme:"blue",isLoading:d,onClick:o,flex:1,children:"Save Changes"}),e.jsx(b,{variant:"outline",onClick:()=>c(!1),flex:1,children:"Cancel"})]})]}):e.jsx(b,{colorScheme:"blue",onClick:()=>c(!0),w:"full",children:"Edit Profile"})]})})}),e.jsxs(g,{spacing:4,align:"stretch",children:[e.jsx(_,{size:"md",children:"Quick Links"}),e.jsxs(ge,{templateColumns:"1fr",gap:3,children:[e.jsx(b,{leftIcon:e.jsx(te,{}),justifyContent:"flex-start",variant:"outline",onClick:()=>t("/my-orders"),h:"auto",py:3,children:e.jsxs(g,{align:"start",spacing:0,children:[e.jsx(y,{fontWeight:"bold",children:"My Orders"}),e.jsx(y,{fontSize:"sm",color:"gray.600",children:"View your order history"})]})}),e.jsx(b,{leftIcon:e.jsx(re,{}),justifyContent:"flex-start",variant:"outline",isDisabled:!0,h:"auto",py:3,children:e.jsxs(g,{align:"start",spacing:0,children:[e.jsx(y,{fontWeight:"bold",children:"Payment Methods"}),e.jsx(y,{fontSize:"sm",color:"gray.600",children:"Coming soon"})]})}),e.jsx(b,{leftIcon:e.jsx(ne,{}),justifyContent:"flex-start",variant:"outline",isDisabled:!0,h:"auto",py:3,children:e.jsxs(g,{align:"start",spacing:0,children:[e.jsx(y,{fontWeight:"bold",children:"Addresses"}),e.jsx(y,{fontSize:"sm",color:"gray.600",children:"Coming soon"})]})})]})]}),e.jsx(b,{leftIcon:e.jsx(ie,{}),colorScheme:"red",variant:"outline",w:"full",onClick:f,children:"Logout"})]})})}):e.jsx(F,{maxW:"container.md",py:8,children:e.jsxs(g,{spacing:6,align:"center",textAlign:"center",children:[e.jsx(_,{children:"Please Log In"}),e.jsx(y,{fontSize:"lg",color:"gray.600",children:"You need to be signed in to view your profile."}),e.jsx(b,{colorScheme:"blue",size:"lg",onClick:()=>t("/login",{state:{from:"/profile"}}),children:"Go to Login"})]})})}export{Me as default};
//# sourceMappingURL=Profile-ChMfb44m.js.map
