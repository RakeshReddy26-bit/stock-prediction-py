import{r as i,i as S}from"./index-BpjOl2gf.js";function h(s){const{loading:e,src:o,srcSet:t,onLoad:m,onError:E,crossOrigin:l,sizes:u,ignoreFallback:c}=s,[d,f]=i.useState("pending");i.useEffect(()=>{f(o?"loading":"pending")},[o]);const n=i.useRef(null),p=i.useCallback(()=>{if(!o)return;a();const r=new Image;r.src=o,l&&(r.crossOrigin=l),t&&(r.srcset=t),u&&(r.sizes=u),e&&(r.loading=e),r.onload=g=>{a(),f("loaded"),m?.(g)},r.onerror=g=>{a(),f("failed"),E?.(g)},n.current=r},[o,l,t,u,m,E,e]),a=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return S(()=>{if(!c)return d==="loading"&&p(),()=>{a()}},[d,p,c]),c?"loaded":d}const I=(s,e)=>s!=="loaded"&&e==="beforeLoadOrError"||s==="failed"&&e==="onError";export{I as s,h as u};
//# sourceMappingURL=use-image-ynoNqIgM.js.map
